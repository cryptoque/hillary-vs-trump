<div class="page__wrapper">

  <div class="world-map">
    <world-map voting-results="$ctrl.votingResults" topo-data="$ctrl.topoData"></world-map>

    <div class="world-map__header">
      <h1 class="world-map__title">{{'worldmap.title' | translate}}<br />{{'worldmap.subtitle' | translate}}</h1>
      <p class="world-map__timescale" ng-if="!$ctrl.endDateReached">
        <select ng-change="$ctrl.switchTimeScale()" ng-model="$ctrl.timeScale">
          <option value="total">{{'worldmap.scale.total' | translate}}</option>
          <option value="day">{{'worldmap.scale.day' | translate}}</option>
        </select>
      </p>
      <p class="world-map__sub">
        {{'worldmap.totalvotes' | translate:{'votes': ($ctrl.votingResults.total.D + $ctrl.votingResults.total.R) } }}<br />
        <a ui-sref="root.info">How it works</a>
      </p>

      <div class="world-map__pie pie">
        <svg viewBox="0 0 32 32">
          <circle r="16" cx="16" cy="16" ng-style="{'strokeDasharray': $ctrl.votingResults.D + ' 100'}" />
        </svg>

        <div class="world-map__R">
          {{'shortname.trump' | translate}}<br />
          {{$ctrl.votingResults.R}}%
        </div>

        <div class="world-map__D">
          {{'shortname.hillary' | translate}}<br />
          {{$ctrl.votingResults.D}}%
        </div>
      </div>
    </div>
  </div>

  <country-results voting-results="$ctrl.votingResults"></country-results>
</div>
